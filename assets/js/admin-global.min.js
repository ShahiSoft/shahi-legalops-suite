!function(t){"use strict";window.ShahiLegalopsSuite=window.ShahiLegalopsSuite||{},ShahiLegalopsSuite.init=function(){this.initAlerts(),this.initTooltips(),this.initConfirmDialogs(),this.initFormValidation(),this.initAjaxHandler()},ShahiLegalopsSuite.initAlerts=function(){t(document).on("click",".shahi-alert .shahi-alert-close",function(a){a.preventDefault(),t(this).closest(".shahi-alert").fadeOut(300,function(){t(this).remove()})})},ShahiLegalopsSuite.initTooltips=function(){t("[data-shahi-tooltip]").each(function(){var a=t(this),e=a.data("shahi-tooltip");a.hover(function(){var i=t('<div class="shahi-tooltip">'+e+"</div>");t("body").append(i);var s=a.offset(),h=a.outerWidth(),n=i.outerWidth();i.css({top:s.top-i.outerHeight()-8,left:s.left+h/2-n/2}),i.fadeIn(200)},function(){t(".shahi-tooltip").fadeOut(200,function(){t(this).remove()})})})},ShahiLegalopsSuite.initConfirmDialogs=function(){t(document).on("click","[data-shahi-confirm]",function(a){if(!confirm(t(this).data("shahi-confirm")||shahiTemplate.i18n.confirm))return a.preventDefault(),!1})},ShahiLegalopsSuite.initFormValidation=function(){t(".shahi-form-validate").on("submit",function(a){var e=t(this),i=!0;if(e.find(".shahi-error-message").remove(),e.find(".shahi-input-error").removeClass("shahi-input-error"),e.find("[required]").each(function(){var a=t(this);a.val().trim()||(i=!1,a.addClass("shahi-input-error"),a.after('<span class="shahi-error-message">'+shahiTemplate.i18n.required+"</span>"))}),e.find('[type="email"]').each(function(){var a=t(this),e=a.val().trim();e&&!ShahiLegalopsSuite.isValidEmail(e)&&(i=!1,a.addClass("shahi-input-error"),a.after('<span class="shahi-error-message">Invalid email address</span>'))}),!i){a.preventDefault();var s=e.find(".shahi-input-error").first();s.length&&t("html, body").animate({scrollTop:s.offset().top-100},300)}return i})},ShahiLegalopsSuite.initAjaxHandler=function(){t(document).ajaxError(function(t,a,e,i){403===a.status?ShahiLegalopsSuite.showNotice("Permission denied. Please refresh the page.","error"):500===a.status&&ShahiLegalopsSuite.showNotice(shahiTemplate.i18n.error,"error")})},ShahiLegalopsSuite.ajax=function(a,e,i,s){e=e||{},e.action=a,e.nonce=shahiTemplate.nonce,t.ajax({url:shahiTemplate.ajaxurl,type:"POST",data:e,success:function(t){t.success?"function"==typeof i&&i(t.data):"function"==typeof s?s(t.data):ShahiLegalopsSuite.showNotice(t.data.message||shahiTemplate.i18n.error,"error")},error:function(t,a,e){"function"==typeof s?s({message:e}):ShahiLegalopsSuite.showNotice(shahiTemplate.i18n.error,"error")}})},ShahiLegalopsSuite.showNotice=function(a,e,i){e=e||"info",i=i||5e3;var s=t('<div class="shahi-alert shahi-alert-'+e+'"><span>'+a+'</span><button class="shahi-alert-close">&times;</button></div>');t(".shahi-legalops-suite-admin").prepend(s),s.fadeIn(300),i>0&&setTimeout(function(){s.fadeOut(300,function(){t(this).remove()})},i)},ShahiLegalopsSuite.showLoading=function(){if(0===t(".shahi-loading-overlay").length){var a=t('<div class="shahi-loading-overlay"><div class="shahi-spinner"></div></div>');t("body").append(a),a.fadeIn(200)}},ShahiLegalopsSuite.hideLoading=function(){t(".shahi-loading-overlay").fadeOut(200,function(){t(this).remove()})},ShahiLegalopsSuite.isValidEmail=function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},ShahiLegalopsSuite.isValidUrl=function(t){try{return new URL(t),!0}catch(t){return!1}},ShahiLegalopsSuite.debounce=function(t,a){var e;return function(){var i=this,s=arguments;clearTimeout(e),e=setTimeout(function(){t.apply(i,s)},a)}},ShahiLegalopsSuite.formatNumber=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},ShahiLegalopsSuite.getUrlParam=function(t){return new URL(window.location.href).searchParams.get(t)},ShahiLegalopsSuite.copyToClipboard=function(a){var e=t("<textarea>");t("body").append(e),e.val(a).select();var i=document.execCommand("copy");return e.remove(),i&&ShahiLegalopsSuite.showNotice("Copied to clipboard!","success",2e3),i},ShahiLegalopsSuite.escapeHtml=function(t){var a=document.createElement("div");return a.textContent=t,a.innerHTML},t(document).ready(function(){ShahiLegalopsSuite.init()})}(jQuery);
